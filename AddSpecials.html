<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bombshell Dashboard</title>
    <!-- Make it stylish now -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.2/css/materialize.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.css" rel="stylesheet">
    <link rel="stylesheet" href="css/BombshellDashboard.css">
    <!-- Adobe Type Kit -->
    <script src="https://use.typekit.net/mhf2njr.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
  </head>
  <body>

  <!-- header begin -->

    <nav class="white" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="index.html" class="brand-logo" style="padding-top:15px" ><img style='height:100px' src="https://lh3.googleusercontent.com/rWQVLq9fpD-4ZQPyTBc39NGtfjHscscqSnaEtONmuysORm3frCZZJfNcJD1nHMZOtk9sEY3_vdLZG4xaJNs1_SFSUe68ztYMWHXqzZrSgrJHVRYuUGr8G5XoySr_usFAiqfhUst1_YJ0CA4xiL8BKYihqcQrruOyYl-TMWwprc71OQLfY5bbRI5HAJB_O7IbQULKkjVK9iooZsxAui-rSrry57K5gc27Rn2dPssMXq-5J8H1QEiLpIS4gkJNnuAwQWgcuTBdFHNYud1Nck5mRr5MryJNgqK5kPCaDLC4YBxPVuUaDs2ZAfmfZeb0-fT9XBvPY20T-PX9Q-Ox7kNy56pORWbX-oCHsKwsQOLDSaiZuOhcuwUWt5r4gTN9bwAMDw-y_TXqa9IqudsX1pYKZysKIJ6pLO9TGZ-ikFUjAsaPXhroM1HbkY9LF332UExaywO_GTDMgZXhlY_9tfGfhLe0_dkeUlS7GBbWqH56wePVqHBlAEWlM7Ra1Cq5AgFsKWYkHELCoDfvOc_BKOs56AqLm4anSVUyG4BTzpyrYXk=w297-h150-no"></a>
      <ul class="right hide-on-med-and-down ">
        <li><a class='bombshellpink' href="ServiceLocation.html"> Locations</a></li>
        <li><a class='bombshellpink' href="#"> Service Menu</a></li>
        <li><a class='bombshellpink' href="#"> Specials</a></li>
        <li><a class='bombshellpink' href="#"> Logout</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
      <li><a class='bombshellpink' href="#"> Link</a></li>
      <li><a class='bombshellpink' href="#"> Link</a></li>
      <li><a class='bombshellpink' href="#"> Link</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse "><i class="material-icons pink-text">menu</i></a>
    </div>
  </nav>
  <!-- end header --->

  <div class="row">
    <div class="col s12 center-align">
      <h1 class="bombshellHeading">ADD SPECIAL</h1>
    </div>
  </div>

  <div class="row">
    <div class="container">
    <div class="col s12 center-align">
      <div class="input-field col s12 l6 ">
        <select id="dlLocationSelect" class="browser-default">


        </select>
      </div>
      <div class="input-field col s12 l6 ">
          <input placeholder="1/2 off Brazilians" id="txtSpecialName" type="text">
          <label for="txtSpecialName">Special Title</label>
        </div>
    </div>
    <div class="col s12 center-align">
      <div class="input-field col s12 ">
          <input placeholder="Lorem ipsum dolar set amit..." id="txtSpecialDescription" type="text">
          <label for="txtSpecialDescription">Special Description</label>
        </div>
    </div>

    <div class="col s12 right">
      <a id="btnAddSpecial" href="#" class="btn white-text btn-flat right waves-effect pink">Save</a>
    </div>

  </div>


  <!-- All da' JavaScriptzz -->
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="//www.parsecdn.com/js/parse-1.6.7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.2/js/materialize.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert-dev.js"></script>
  <script src="js/BombshellDashboard.js"></script>
  <script>

  $(document).ready(function(){

    Parse.initialize("6lwXuEam4Zl0heDrMSPQtRx2xcaLM792aRNjw1gF", "hvatZD2xQvA6mmL77SDQsc9T6kqrqLo8PbUmDswC");
    //TODO: load services.

    var Locations = Parse.Object.extend("Locations");
    var query = new Parse.Query(Locations);
    query.find({
      success: function(results) {

        // Do something with the returned Parse.Object values
        for (var i = 0; i < results.length; i++) {
          var object = results[i];


          var listItem =  "<option value='"+ object.id +"'>"+ object.get('Name') +" ("+ object.get('StateCode') +")</option>"

          $(listItem).appendTo("#dlLocationSelect");
        }
        var prependItem = "<option>-- no location selected --</option>"
        $(prependItem).prependTo("#dlLocationSelect");
      },
      error: function(error) {
        alert("Error: " + error.code + " " + error.message);
      }
    });




    $("#btnAddSpecial").click(function(){
      var locationSelected = $("#dlLocationSelect option:selected").val();

      //create location pointer
      var Location = Parse.Object.extend("Locations");
      var location = new Location();
      location.id = locationSelected;

      var specialTitle = $("#txtSpecialName").val();
      var specialDescription = $("#txtSpecialDescription").val();

      var Specials = Parse.Object.extend("Specials");
      var special = new Specials();
        special.set("LocationID",location);
        special.set("Special",specialTitle);
        special.set("Description",specialDescription);
          special.save({
            success: function(special){
              swal({
                confirmButtonColor: "#009688",
                title: "Save Successful!",
                text: "Specials successfully added.",
                type: "success",
                showCancelButton:false,
                confirmButtonColor:"#e91e63",
                confirmButtonText:"Cool",
                closeOnConfirm: true
              })
              $("#txtSpecialName").val('');
              $("#txtSpecialDescription").val('');
            },
            error:function(special,error){
              swal("Uh oh!", error.message, "error")


            }
          })


    })

  })



  </script>
  </body>
</html>
